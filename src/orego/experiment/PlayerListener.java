package orego.experiment;

import java.util.Scanner;
import java.io.*;

/**
 * Listens to a GTP player running in another process. Whenever that player emits a line of output,
 * the line is passed to an instance of Game.
 */
public class PlayerListener implements Runnable {

	/** The color of moves being generated by the other program. */
	private int color;
	
	/** Input from the other program. */
	private InputStream fromProgram;
	
	/** The Game being played. */
	private Game game;

	public PlayerListener(int color, InputStream input, Game game) {
		this.color = color;
		this.fromProgram = input;
		this.game = game;
	}

	@Override
	public void run() {
		Scanner s = new Scanner(fromProgram);
		while (s.hasNextLine()) {
			// s is passed in in case there is a multi-line error message,
			// so game can dump all of the message to the output file
			game.handleResponse(color, s.nextLine(), s);
		}
	}
	
}
